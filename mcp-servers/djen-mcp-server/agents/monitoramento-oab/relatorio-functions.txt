  private async gerarRelatorioUnico() {
    console.log('ğŸ“„ Gerando relatÃ³rio do dia...');

    const hoje = new Date().toISOString().split('T')[0];
    const hojeFormatado = new Date().toLocaleDateString('pt-BR');
    const arquivo = path.join(CONFIG.outputDir, `Publicacoes-OAB-129021-${hoje}.txt`);

    // Buscar publicaÃ§Ãµes de hoje agrupadas por cliente
    const publicacoes = this.db.prepare(`
      SELECT * FROM publicacoes
      WHERE data_disponibilizacao LIKE ?
      ORDER BY cliente_id, tribunal, numero_processo
    `).all(`${hoje}%`) as Publicacao[];

    if (publicacoes.length === 0) {
      console.log('   â„¹ï¸  Nenhuma publicaÃ§Ã£o para gerar relatÃ³rio\n');
      return;
    }

    // Agrupar por cliente
    const porCliente = new Map<string, Publicacao[]>();
    for (const pub of publicacoes) {
      const clienteId = pub.clienteId || 'DESCONHECIDO';
      if (!porCliente.has(clienteId)) {
        porCliente.set(clienteId, []);
      }
      porCliente.get(clienteId)!.push(pub);
    }

    // Gerar conteÃºdo do relatÃ³rio
    let conteudo = 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n';
    conteudo += '           PUBLICAÃ‡Ã•ES DJEN - OAB 129021/SP\n';
    conteudo += 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n';
    conteudo += `Data: ${hojeFormatado} (${hoje})\n`;
    conteudo += `Total de publicaÃ§Ãµes: ${publicacoes.length}\n`;
    conteudo += `Gerado em: ${new Date().toLocaleString('pt-BR')}\n\n`;

    // Resumo por cliente
    conteudo += 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n';
    conteudo += 'RESUMO POR CLIENTE\n';
    conteudo += 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n';

    for (const [clienteId, pubs] of Array.from(porCliente.entries()).sort((a, b) => b[1].length - a[1].length)) {
      const nomeCliente = this.clientesConfig.clientes.find(c => c.id === clienteId)?.nome || clienteId;
      conteudo += `${nomeCliente}: ${pubs.length} publicaÃ§Ã£o${pubs.length > 1 ? 'Ãµes' : ''}\n`;
    }

    // Detalhamento por cliente
    conteudo += '\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n';
    conteudo += 'DETALHAMENTO POR CLIENTE\n';
    conteudo += 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n';

    for (const [clienteId, pubs] of Array.from(porCliente.entries()).sort((a, b) => b[1].length - a[1].length)) {
      const nomeCliente = this.clientesConfig.clientes.find(c => c.id === clienteId)?.nome || clienteId;

      conteudo += '\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n';
      conteudo += `CLIENTE: ${nomeCliente.toUpperCase()} (${pubs.length})\n`;
      conteudo += 'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n';

      // Agrupar por processo
      const porProcesso = new Map<string, Publicacao[]>();
      for (const pub of pubs) {
        if (!porProcesso.has(pub.numeroProcesso)) {
          porProcesso.set(pub.numeroProcesso, []);
        }
        porProcesso.get(pub.numeroProcesso)!.push(pub);
      }

      // Listar cada processo
      for (const [numeroProcesso, pubsProcesso] of porProcesso.entries()) {
        const primeira = pubsProcesso[0];

        conteudo += `Processo: ${numeroProcesso}\n`;
        conteudo += `Tribunal: ${primeira.tribunal}\n`;
        conteudo += `Classe: ${primeira.classe || 'N/A'}\n`;
        conteudo += `Ã“rgÃ£o: ${primeira.orgaoJulgador || 'N/A'}\n\n`;

        // Listar publicaÃ§Ãµes do processo
        for (const pub of pubsProcesso) {
          const dataPub = new Date(pub.dataDisponibilizacao).toLocaleDateString('pt-BR');
          conteudo += `  â€¢ ${pub.tipo} - ${dataPub}\n`;
          conteudo += `    ${pub.texto}\n`;
          conteudo += `    Link: ${pub.link}\n\n`;
        }

        conteudo += '\n';
      }
    }

    conteudo += '\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n';
    conteudo += 'FIM DO RELATÃ“RIO\n';
    conteudo += 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n';

    // Salvar arquivo (sobrescreve se existir)
    await fs.writeFile(arquivo, conteudo, 'utf-8');
    console.log(`   âœ… RelatÃ³rio salvo: ${path.basename(arquivo)}\n`);
  }
